#!/usr/bin/env python3
import sys
import os
from pathlib import Path

MYBORG_MODS = Path(os.environ['MYBORG_MODS'])
def main():
    acc = []
    #for path in MYBORG_MODS.glob('[0-9]*'):
    for path in MYBORG_MODS.glob('**'):
        if (path/'.insitu/activate').is_file(): acc.append(path)
        elif (path/'insitu.d/insitu').is_file(): acc.append(path)
    acc.sort()
    for path in acc:
        if (path/'insitu.d/insitu').is_file():
            print( f'echo "[----] activating.old:\t" [{path.name}]' )
            print( f'cd {path}        '.ljust(60), '; source ./insitu.d/insitu 2>> ~/log' )
        if (path/'.insitu/activate').is_file():
            print( f'echo "[----] activating.new:\t" [{path.name}]' )
            #print( f'echo new-activating: [{path.name}]' )
            print( f'cd {path}/.insitu'.ljust(60), '; source ./activate 2>> ~/log' )
    for path in acc:
        print( f'# {path}')
if __name__=='__main__':
    main()
